\documentclass{book}
\usepackage[scheme=chinese,zihao=-4,heading=true]{ctex}
\usepackage[margin=1.5in, includeheadfoot]{geometry}
\usepackage{mathtools,amssymb,amsthm,mathrsfs}
\usepackage{graphics}
\usepackage{booktabs}
\usepackage[numbers]{gbt7714}
\usepackage{hyperref}
\newtheorem{thm}{å®šç†}[chapter]
\newtheorem{lem}[thm]{å¼•ç†}
\newtheorem{cor}[thm]{æ¨è®º}
\newtheorem{defn}[thm]{å®šä¹‰}
\newtheorem{rmk}[thm]{æ³¨è®°}
\newtheorem{exmp}[thm]{ä¾‹å­}
\newtheorem{exam}[thm]{è¯•é¢˜}

\makeatletter
\newenvironment{abstract}{%
    \if@twocolumn
      \chapter*{\abstractname}%
      \addcontentsline{toc}{chapter}{\protect\numberline{}\abstractname}%
    \else
      \small
      \begin{center}%
        {\bfseries \abstractname\vspace{-.5em}\vspace{\z@}}%
      \end{center}%
      \quotation
      \addcontentsline{toc}{chapter}{\abstractname}%
    \fi}
    {\if@twocolumn\else\endquotation\fi}
\makeatother

\newenvironment{enabstract}%
{\renewcommand{\abstractname}{Abstract}%
\begin{abstract}}%
{\end{abstract}}

\newenvironment{cnabstract}
{\renewcommand{\abstractname}{æ‘˜è¦}\begin{abstract}}%
{\end{abstract}}

% Define the problem environment
\makeatletter
\newcommand\cdotfill{%
    \leavevmode\cleaders\hb@xt@.44em{\hss$\cdot$\hss}\hfill\kern\z@
}
\makeatletter
\newcounter{problemcounter}
\newenvironment{problem}[2]{
    \refstepcounter{problemcounter}
    \noindent\textbf{é¢˜ \theproblemcounter.}~#1~\cdotfill~(\,\textbf{#2}\,)\par
}{}

% Define the choice environment
\usepackage{environ}
\newlength{\choiceslen}

\newif\ifshowcorrect
\newcounter{choices}
\newcommand{\choicefinal}[1]{%
  \ifnum\value{choices}>0 \hfill\fi\egroup
  \hspace{0pt}%
  \hbox to\choiceslen
  \bgroup
  \stepcounter{choices}%
  \ifcase#1\relax
    (\Alph{choices})%
  \else
    \ifshowcorrect
      \expandafter\underline
    \fi
    {(\Alph{choices})}%
  \fi\space}
\newcommand{\choicetemp}[1]{\stepcounter{choices}\space(\Alph{choices})\cr}

\NewEnviron{choices}
 {\setcounter{choices}{0}%
  \let\choice\choicetemp
  \settowidth{\choiceslen}{\vbox{\halign{##\hfil\cr\BODY\crcr}}}
  \ifdim\choiceslen>.5\textwidth
    \setlength{\choiceslen}{\textwidth}%
  \else
    \ifdim\choiceslen>.25\textwidth
      \setlength{\choiceslen}{.5\textwidth}%
    \else
      \setlength{\choiceslen}{.25\textwidth}%
    \fi
  \fi
  \let\choice\choicefinal
  \setcounter{choices}{0}%
  \begin{flushleft}
  \bgroup\BODY\hfill\egroup
  \end{flushleft}}
  
\begin{filecontents}{ref.bib}
@incollection{einstein1976,
  author        = {é˜¿å°”ä¼¯ç‰¹Â·çˆ±å› æ–¯å¦},
  key           = {a1 er3 bo2 te4  ai4 yin1 si1 tan3},
  title         = {å¹¿ä¹‰ç›¸å¯¹è®ºçš„æ¥æº},
  mark*         = {M},
  translator*   = {è®¸è‰¯è‹± and æå®æ’ and èµµä¸­ç«‹ and èŒƒå²±å¹´},
  booktitle     = {çˆ±å› æ–¯å¦æ–‡é›†},
  edition       = {1},
  address       = {åŒ—äº¬},
  publisher     = {å•†åŠ¡å°ä¹¦é¦†},
  year          = {1976},
  volume        = {1},
  pages         = {319-323},
  language*     = {chinese}
}
@book{born1981,
  author        = {M. ç»æ©},
  title         = {çˆ±å› æ–¯å¦çš„ç›¸å¯¹è®º},
  mark*         = {M},
  edition       = {1},
  translator    = {å½­çŸ³å®‰},
  address       = {çŸ³å®¶åº„},
  publisher     = {æ²³åŒ—äººæ°‘å‡ºç‰ˆç¤¾},
  year          = {1981},
  pages         = {2},
  language*     = {chinese}
}
\end{filecontents}


\begin{document}
\frontmatter
\tableofcontents
\newpage
\begin{cnabstract}
  è¿™æ˜¯ä¸€ä¸ªç®€çŸ­çš„æœ¬ç§‘æ¯•ä¸šè®ºæ–‡å†™ä½œæ¨¡æ¿ã€‚
  
  
  \noindent\textbf{å…³é”®å­—}: æœ¬ç§‘æ¯•ä¸šè®ºæ–‡, å†™ä½œæ¨¡æ¿, LaTeX
\end{cnabstract}
\newpage
\begin{enabstract}
  This is a short introduction of LaTeX template for undergraduate students.
  
  \noindent\textbf{Keywords}: Undergraduate thesis, writing template, LaTeX
\end{enabstract}
\mainmatter
\chapter{å¼•è¨€}
\section{ç ”ç©¶èƒŒæ™¯}
\chapter{å®šç†ä¸å®šä¹‰}
\begin{defn}[è°ƒå’Œå‡½æ•°]
åœ¨æ•°å­¦ä¸­ï¼Œä¸€ä¸ªå®å˜é‡æˆ–å¤å˜é‡çš„å®éƒ¨ä¸è™šéƒ¨çš„å®æ•°å€¼å‡½æ•°$u$ç§°ä¸ºè°ƒå’Œå‡½æ•°ï¼Œå¦‚æœå®ƒæ»¡è¶³æ‹‰æ™®æ‹‰æ–¯æ–¹ç¨‹$\Delta u=0$ï¼Œå³å®ƒçš„äºŒé˜¶æ··åˆå¯¼æ•°åœ¨æ¬§æ°ç©ºé—´ä¸­çš„æ¯ä¸ªç‚¹éƒ½ç­‰äºé›¶ã€‚
\end{defn}

\begin{thm}[æå¤§å€¼åŸç†]\label{thm:maximum-principle}
  å¦‚æœä¸€ä¸ªè°ƒå’Œå‡½æ•°åœ¨æŸä¸ªåŒºåŸŸå†…å–å¾—äº†æœ€å¤§å€¼æˆ–æœ€å°å€¼ï¼Œé‚£ä¹ˆå®ƒå¿…å®šåœ¨è¯¥åŒºåŸŸçš„è¾¹ç•Œä¸Šå–å¾—æå€¼ï¼Œè€Œä¸”ä»…ä»…å–å¾—è¿™äº›æå€¼ã€‚
\end{thm}

\begin{rmk}
  å®šç†~\ref{thm:maximum-principle}åœ¨å®é™…ä¸­æœ‰å¹¿æ³›çš„åº”ç”¨ï¼Œä¾‹å¦‚åœ¨çƒ­ä¼ å¯¼å’Œç”µåœºåˆ†å¸ƒçš„é—®é¢˜ä¸­ã€‚
\end{rmk}
\chapter{æ•°å­¦å…¬å¼çš„ä½¿ç”¨}
\section{ç‹¬ç«‹ä¸€è¡Œçš„å…¬å¼}
\[
 a^2+b^2=c^2
\]
\section{ç¼–å·å…¬å¼}
\begin{equation}\label{eq:test}
    \Gamma_{ij}^k=\frac{1}{2}g^{kl}
    \left(
    \frac{\partial}{\partial x^i}g_{lj}
    +\frac{\partial}{\partial x^j}g_{il}
    -\frac{\partial}{\partial x^l}g_{ij}
    \right).
\end{equation}
ä¸Šè¿°å…¬å¼\eqref{eq:test}å°±æ˜¯Christoffelç¬¦å·çš„è®¡ç®—å…¬å¼ã€‚
\section{å¤šè¡Œå…¬å¼}
\[\begin{multlined}
\sum_{n=1}^{\infty}\frac{1}{n^2}
=1+\frac{1}{2^2}+\frac{1}{3^2}+\cdots\\
=\frac{\pi^2}{6}.
\end{multlined}\]
\subsection{å¯¹é½}
\begin{align*}
    a&+b=c\\
    ad&-bc=1.    
\end{align*}
\chapter{æ’å›¾ä¸è¡¨æ ¼çš„ä½¿ç”¨}
\section{æ’å›¾}
\begin{figure}[htbp]
  \centering
  \includegraphics[width=2cm]{example-image-a}
  \caption{Example image}\label{fig:example-a}
\end{figure}
åœ¨å›¾\ref{fig:example-a}ä¸­ï¼Œæˆ‘ä»¬æœ‰...
\section{è¡¨æ ¼}
\begin{table}
\centering
\begin{tabular}{lcr}
  \toprule
  Left & Center & Right \\
  \midrule
  Data & Data & Data \\
  \bottomrule
\end{tabular}
\caption{ä¸‰çº¿è¡¨æ ¼}
\label{tab:table}
\end{table}
åœ¨è¡¨\ref{tab:table}ä¸­ï¼Œæˆ‘ä»¬æœ‰...
\chapter{é€‰æ‹©é¢˜}
\begin{problem}{è®¾$\alpha\in(0,\pi/2)$, $\beta\in(0,\pi/2)$, è€Œä¸”$\tan\alpha= \frac{1+\sin\beta}{\cos\beta}$, åˆ™}{B}
  \begin{choices}
    \choice0 $3\alpha-\beta=\pi/2$;
    \choice1 $2\alpha-\beta=\pi/2$;
    \choice0 $3\alpha+\beta=\pi/2$;
    \choice0 $2\alpha+\beta=\pi/2$;
  \end{choices}
\end{problem}
\chapter{åµŒå¥—åˆ—è¡¨}
\begin{enumerate}
  \item æ•°åˆ—æé™å®šä¹‰
  \item å‡½æ•°æé™å®šä¹‰
    \begin{enumerate}
      \item è‡ªå˜é‡è¶‹è¿‘æœ‰é™å€¼æ—¶å‡½æ•°çš„æé™

        è®¾å‡½æ•°$ğ‘“(x)$åœ¨ç‚¹$x_0$çš„æŸä¸€å»å¿ƒé‚»åŸŸå†…æœ‰å®šä¹‰, å¦‚æœå­˜åœ¨å¸¸æ•°$a$, å¯¹äºä»»æ„ç»™å®šçš„æ­£æ•°$\epsilon$, éƒ½$\exists\delta>0$, ä½¿ä¸ç­‰å¼
        \[
          \lvert f(x)-a \rvert<\epsilon,
        \]
        åœ¨$0<\lvert x-x_0 \rvert<\delta$æ—¶éƒ½æˆç«‹ã€‚
    \end{enumerate}
\end{enumerate}
\chapter{å‚è€ƒæ–‡çŒ®çš„ä½¿ç”¨}
\nocite{*}
å…³äºçˆ±å› æ–¯å¦å‘å±•çš„å¹¿ä¹‰ç›¸å¯¹è®ºï¼Œå¯ä»¥å‚è€ƒ\cite{born1981}ã€‚

 
\backmatter
\appendix
\chapter{åè®°}
\chapter*{è‡´è°¢}
%\bibliography{ref}
\begin{thebibliography}{99}
  \bibitem[é˜¿å°”ä¼¯ç‰¹Â·çˆ±å› æ–¯å¦(1976)]{einstein1976}
  é˜¿å°”ä¼¯ç‰¹Â·çˆ±å› æ–¯å¦.
  \newblock å¹¿ä¹‰ç›¸å¯¹è®ºçš„æ¥æº\allowbreak[M]//\allowbreak
  \newblock çˆ±å› æ–¯å¦æ–‡é›†: ç¬¬ 1 å·.
  \newblock åŒ—äº¬: å•†åŠ¡å°ä¹¦é¦†, 1976: 319-323.
  \bibitem[ç»æ©M.(1981)]{born1981}
  ç»æ© M.
  \newblock çˆ±å› æ–¯å¦çš„ç›¸å¯¹è®º\allowbreak[M].
  \newblock  å½­çŸ³å®‰, è¯‘.
  \newblock çŸ³å®¶åº„: æ²³åŒ—äººæ°‘å‡ºç‰ˆç¤¾, 1981: 2.

  \bibitem{Ji2015}
  å­£å³°. é«˜ä¸­æ•°å­¦æ€æƒ³æ–¹æ³•çš„åº”ç”¨ä¾‹è¯´[J]. ä¸­å­¦è¯¾ç¨‹è¾…å¯¼(æ•™å¸ˆæ•™è‚²), 2015(09):83.
  \bibitem{ZhengHunag2024}
  éƒ‘ä¹‰å¯Œ, é»„ç”«å…¨. æ•°å­¦çš„çœ¼å…‰ï¼šæŒ‡å‘â€œä¸‰ä¼šâ€ç´ å…»ç›®æ ‡çš„æ•°å­¦æŠ½è±¡æ€æƒ³[J]. æ•°å­¦æ•™è‚²å­¦æŠ¥, 2024, 33(01):59-63.

\end{thebibliography}
\end{document} 
